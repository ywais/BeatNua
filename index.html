<!DOCTYPE html>
<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Beatכנס נועה</title>
    <style>
      body {
        direction: rtl;
        background-color: #DCD0FF;
        font-family: Arial, sans-serif;
        font-size: 16px;
        line-height: 1.5;
      }

      .header1 {
        background-image: linear-gradient(to right, #DCD0FF,#FFC526,#DCD0FF);
        color: black;
        text-align: center;
        padding: 20px;
      }

      .header2 {
        background-image: linear-gradient(to right, #DCD0FF,#DCD0FF,#FFC526,#DCD0FF,#DCD0FF);
        color: black;
        text-align: center;
        padding: 10px;
      }

      input {
        outline: none;
      }

      #codeSquaresRow {
        direction: ltr;
        display: flex;
        justify-content: space-evenly;
        max-width: 100%;
      }

      .input-square {
        display: inline-block;
        width: 14%;
        max-width: 40px;
        margin-right: 1%;
        margin-left: 1%;
        border: 5px solid transparent;
        border-radius: 5px;
        text-align: center;
        font-weight: bold;
        font-size: 20px;
        color: #5a5a5a;
        aspect-ratio: 1/1;
      }

      #input-square1,
      #input-square2 {
        border-color: #f9f906;
      }

      #input-square3 {
        border-color: #00B050;
      }

      #input-square4,
      #input-square5,
      #input-square6 {
        border-color: red;
      }

      .form {
        margin: 10px;
        padding: 10px;
        border: 2px solid #FFC526;
        border-radius: 5px;
        background-color: #ffffff;
      }

      .form-input {
        direction: rtl;
        display: block;
        width: calc(100% - 10px);
        margin-top: 10px;
        padding: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 16px;
      }

      .form-label {
        font-weight: bold;
        margin-right: 10px;
      }

      .form-birthday {
        direction: ltr;
        display: flex;
        justify-content: space-evenly;
        align-content: center;
        flex-direction: row;
        justify-content: space-between;
      }

      #birthdayDivider {
        font-size: 30px;
        margin-top: 10px;
        padding: 0 10px;
      }

      #submitBtn {
        display: block;
        width: 100%;
        margin-top: 10px;
        padding: 10px;
        border-radius: 5px;
        border: none;
        background-image: linear-gradient(to right, #DCD0FF,#DCD0FF,#FFC526,#DCD0FF,#DCD0FF);
        color: black;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
      }

      /* .error-message {
        color: red;
        font-weight: bold;
        margin-top: 10px;
      }

      .success-message {
        text-align: center;
        margin-top: 10px;
      } */

      img {
        max-width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <header>
      <h1 class="header1">כנס
        Beatנועה
      </h1>
      <h2 class="header2">שיבוץ חדרים</h2>
    </header>
    <main id="mainSection">
      <p>אנא הזינו את הקוד שאספתם:</p>
      <div id="codeSquaresRow">
        <input type="text" class="input-square" id="input-square1" maxlength="1" onkeyup="moveToNext(event, 'input-square2')" />
        <input type="text" class="input-square" id="input-square2" maxlength="1" onkeyup="moveToNext(event, 'input-square3')" />
        <input type="text" class="input-square" id="input-square3" maxlength="1" onkeyup="moveToNext(event, 'input-square4')" />
        <input type="text" class="input-square" id="input-square4" maxlength="1" onkeyup="moveToNext(event, 'input-square5')" />
        <input type="text" class="input-square" id="input-square5" maxlength="1" onkeyup="moveToNext(event, 'input-square6')" />
        <input type="text" class="input-square" id="input-square6" maxlength="1" onkeyup="moveToNext(event, 'firstName')" />
      </div>
      <p>הזינו את פרטיכם:</p>
      <form class="form">
        <label class="form-label" for="firstName">שם פרטי</label>
        <input type="text" class="form-input" id="firstName" required />
        <br />
        <label class="form-label" for="lastName">שם משפחה</label>
        <input type="text" class="form-input" id="lastName" required />
        <br />
        <label class="form-label">תאריך לידה</label>
        <div class="form-birthday">
          <!-- <input type="number" class="form-input" id="day" min="1" max="31" placeholder="יום" required /> -->
          <select class="form-input" id="day" name="day" >
            <option value=0>יום</option>
            <option value=1>1</option> <option value=2>2</option> <option value=3>3</option> <option value=4>4</option> <option value=5>5</option>
            <option value=6>6</option> <option value=7>7</option> <option value=8>8</option> <option value=9>9</option> <option value=10>10</option>
            <option value=11>11</option> <option value=12>12</option> <option value=13>13</option> <option value=14>14</option> <option value=15>15</option>
            <option value=16>16</option> <option value=17>17</option> <option value=18>18</option> <option value=19>19</option> <option value=20>20</option>
            <option value=21>21</option> <option value=22>22</option> <option value=23>23</option> <option value=24>24</option> <option value=25>25</option>
            <option value=26>26</option> <option value=27>27</option> <option value=28>28</option> <option value=29>29</option> <option value=30>30</option>
            <option value=31>31</option>
          </select>          
          <span id="birthdayDivider">/</span>
          <!-- <input type="number" class="form-input" id="month" min="1" max="12" placeholder="חודש" required /> -->
          <select class="form-input" id="month" name="month" >
            <option value=0>חודש</option>
            <option value=1>1</option> <option value=2>2</option> <option value=3>3</option> <option value=4>4</option> <option value=5>5</option>
            <option value=6>6</option> <option value=7>7</option> <option value=8>8</option> <option value=9>9</option> <option value=10>10</option>
            <option value=11>11</option> <option value=12>12</option>
          </select>          
        </div>
      </form>
      <button id="submitBtn">כניסה</button>
    </main>
    <script>
      // Get the input fields and submit button
      const codeInputs = document.querySelectorAll(
        'input[class="input-square"]'
      );
      const firstNameInput = document.getElementById("firstName");
      const lastNameInput = document.getElementById("lastName");
      const dayInput = document.getElementById("day");
      const monthInput = document.getElementById("month");
      const submitButton = document.getElementById("submitBtn");
      const mainSec = document.getElementById("mainSection");
      let userImgCode;

      // Jump to next input after typing a digit
      function moveToNext(event, nextInputId) {
        const currentInput = event.target;
        const currentInputValue = currentInput.value;
        const maxLength = currentInput.getAttribute("maxlength");
        
        if (currentInputValue.length >= maxLength) {
          const nextInput = document.getElementById(nextInputId);
          nextInput.focus();
        }
      }

      // Define the userCodes array
      const userCodes = [
        {
          idCode: "דק23",
          imgCode: "K5OdT0j"
        },
        {
          idCode: "נפ8",
          imgCode: "F7iPoJC"
        },
        {
          idCode: "על5",
          imgCode: "TeVaKF1"
        },
        {
          idCode: "אפ30",
          imgCode: ""
        },
        {
          idCode: "יו4",
          imgCode: "bUjuUJg"
        },
        {
          idCode: "פל28",
          imgCode: "oGrzElV"
        },
        {
          idCode: "רר26",
          imgCode: "ZIjd4qu"
        },
        {
          idCode: "שז19",
          imgCode: "ZIjd4qu"
        }
      ];

      // Define a function to check the entry code
      function checkCode() {
        let entryCode = "";
        for (let i = 0; i < codeInputs.length; i++) {
          entryCode += codeInputs[i].value;
        }
        if (entryCode !== "179127") {
          alert("קוד הכניסה שגוי, נסו שנית");
          return false;
        }
        return true;
      }

      // Define a function to check the user code
      function checkUser() {
        let userCode =
          firstNameInput.value.charAt(0) + lastNameInput.value.charAt(0);
        userCode += dayInput.value;
        // if (!userCodes.includes(userCode)) {
        //   alert("פרטים אישיים לא נמצאו, אנא בדקו שנית");
        //   return false;
        // }
        // return true;
        for (let i = 0; i < userCodes.length; i++) {
          if (userCodes[i].idCode === userCode) {
            userImgCode = userCodes[i].imgCode;
            return true;
          }
        }
        alert("פרטים אישיים לא נמצאו, אנא בדקו שנית");
        return false;
      }

      // Define a function to submit the form
      function submitForm(event) {
        event.preventDefault();
        if (checkCode() && checkUser()) {
          const image = document.createElement("img");
          image.setAttribute("src", `https://i.imgur.com/${userImgCode}.png`);
          submitButton.setAttribute("disabled", "disabled");
          // document.body.appendChild(image);
          mainSec.insertBefore(image, mainSec.firstChild);
        }
      }

      // Add an event listener to the submit button
      submitButton.addEventListener("click", submitForm);
    </script>
  </body>
</html>
